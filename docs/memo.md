현재 설계에서 어떤 부분을 수정하고 싶으신가요?

  1. [✔] Merchant 테이블 구조
     필드 추가/삭제/변경 (예: 수수료 정책, 사업자 정보 등)
❯ 2. [ ] MID/단말기 매핑 구조
     merchant_pg_mappings 테이블 변경 또는 관계 수정
  3. [ ] 수수료 정책 구조
     fee_policy JSONB 구조 변경 또는 별도 테이블로 분리
  4. [ ] 조직-가맹점 관계
     org_id, org_path 연결 방식 변경

---
# 수정사항

2.1. 영업점등록에서 법인사업자도 사업자번호를 갖고 있다.
2.1. 영업점등록에서 수수료등록 부분은 제거


-----
  한 줄 요약

  다단계 영업 구조의 복잡한 수수료 정산을 자동화하는 복식부기 기반 정산 플랫폼

  ---
  프로젝트 개요

  Bill&Pay는 PG사(결제대행사)로부터 수신한 대량 결제 데이터를 원장(Ledger) 기반으로 정확하게 정산하는 B2B 플랫폼입니다. 특히 5단계 계층 구조(총판 → 대리점 → 딜러 → 셀러 → 가맹점)에서 발생하는 복잡한 수수료 분배를
  자동으로 처리합니다.

  ---
  핵심 기능

  1. 복식부기 정산 엔진

  - 모든 거래를 CREDIT/DEBIT으로 기록
  - Zero-Sum 원칙: 거래 금액 = 모든 정산 합계
  - 부분취소 시 비례 계산 자동 적용

  2. 5단계 조직 계층 관리

  DISTRIBUTOR(총판) → AGENCY(대리점) → DEALER(딜러) → SELLER(셀러) → VENDOR(가맹점)
  - 상위 조직이 하위 조직의 데이터 조회 가능
  - 각 단계별 수수료율 설정

  3. 멀티테넌트 아키텍처

  - 테넌트(고객사)별 완전 분리된 데이터
  - Schema-per-Tenant 방식으로 보안 강화

  4. PG사 연동 (KORPAY)

  - 실시간 웹훅 결제 알림 수신
  - 대량 결제 데이터 배치 처리
  - HMAC-SHA256 서명 검증

  5. 대시보드 & 리포팅

  - 실시간 매출 현황
  - 기간별 정산 통계
  - 상위 가맹점 랭킹

  ---
  아이콘 제작 키워드
  ┌───────────┬─────────────────────────────────────┐
  │   개념    │             시각적 요소             │
  ├───────────┼─────────────────────────────────────┤
  │ 정산/금융 │ 동전, 지폐, 원화(₩), 계산기, 그래프 │
  ├───────────┼─────────────────────────────────────┤
  │ 원장/장부 │ 책, 문서, 체크리스트, 스프레드시트  │
  ├───────────┼─────────────────────────────────────┤
  │ 복식부기  │ 양쪽 저울, +/- 기호, 균형           │
  ├───────────┼─────────────────────────────────────┤
  │ 계층 구조 │ 트리, 피라미드, 연결된 노드         │
  ├───────────┼─────────────────────────────────────┤
  │ 결제      │ 카드, POS 단말기, QR코드            │
  ├───────────┼─────────────────────────────────────┤
  │ 자동화    │ 톱니바퀴, 순환 화살표, 로봇         │
  └───────────┴─────────────────────────────────────┘
  ---
  추천 아이콘 컨셉

  1. 메인 아이콘: 원화(₩) 심볼 + 트리 구조 결합
  2. 서브 컨셉: 균형 잡힌 저울 위에 계층화된 노드들
  3. 컬러: 신뢰감 있는 파란색/남색 또는 금융 느낌의 초록색/골드


